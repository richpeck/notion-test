############################################################
############################################################
##          ____ _                 _  __                  ##
##        /  ___| |               (_)/ _|                 ##
##        \ `--.| |__   ___  _ __  _| |_ _   _            ##
##         `--. \ '_ \ / _ \| '_ \| |  _| | | |           ##
##        /\__/ / | | | (_) | |_) | | | | |_| |           ##
##        \____/|_| |_|\___/| .__/|_|_|  \__, |           ##
##                          | |           __/ |           ##
##                          |_|          |___/            ##
##                                                        ##
############################################################
############################################################

## Shops ##
## Allows us to populate connected Shopify stores in our DB ##
class CreateShops < ActiveRecord::Migration::Current

  ###########################################
  ###########################################

  # => Decs
  @@table = :shops

  ###########################################
  ###########################################

  ## Up ##
  def up
    create_table @@table do |t|
      t.string :name
      t.string :email # => RPECK 23/01/2020
      t.string :token_encrypted

      # => RPECK 21/01/2020
      # => Added to provide ability to change the system
      t.boolean :pwinty_auto, default: false
      t.boolean :email_notifications, default: false

      t.index  :name, unique: true
    end
  end

  ###########################################
  ###########################################

  ## Down ##
  def down
    drop_table @@table, if_exists: true
  end

  ###########################################
  ###########################################

end

############################################################
############################################################
